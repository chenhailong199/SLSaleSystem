<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="com.sl.dao.user.UserMapper">
 	<resultMap type="User" id="userMap">
 		<id property="id" column="id" javaType="java.lang.Integer"/>
 		<result property="userName" column="userName" javaType="java.lang.String"/>
 		<result property="loginCode" column="loginCode" javaType="java.lang.String"/>
        <result property="password" column="password" javaType="java.lang.String"/>
        <result property="payPwd" column="payPwd" javaType="java.lang.String"/>
        <result property="roleId" column="roleId" javaType="java.lang.Integer"/>
        <result property="userTypeId" column="userTypeId" javaType="java.lang.Integer"/>
        <result property="status" column="status" javaType="java.lang.Integer"/>
        <result property="lastLoginTime" column="lastLoginTime" javaType="java.sql.Timestamp"/>
 		<result property="createdBy" column="createdBy" javaType="java.lang.String"/>
 		<result property="createdTime" column="createdTime" javaType="java.sql.Timestamp"/>
 		<result property="modifiedBy" column="modifiedBy" javaType="java.lang.String"/>
 		<result property="modifiedTime" column="modifiedTime" javaType="java.sql.Timestamp"/>
 	</resultMap>
 			
 	<select id="getLoginUser" parameterType="User" resultMap="userMap">
 		select * from sl_user 
 			where loginCode = #{loginCode} and password = #{password}
 	</select>
 	
 	<select id="loginCodeIsExit" resultType="int">
 		select count(*) from sl_user 
 			<trim prefix="where" prefixOverrides="and | or">
 				<if test="loginCode != null">loginCode = #{loginCode}</if>
 			</trim>
 			
 	</select>
 	
 	<insert id="saveUser" parameterType="User" > 
 		insert into sl_user (loginCode,password) 
 			values(#{loginCode},#{password})
 	</insert>
 	
 	<update id="updateUser" parameterType="User" >
 		update sl_user 
 			<set>
 				<if test="loginCode != null">loginCode = #{loginCode},</if>
 				<if test="lastLoginTime != null">lastLoginTime = #{lastLoginTime},</if>
 				<if test="password != null">password = #{password},</if>
 			</set>
 			where id = #{id}
 	</update>	
 </mapper>	